(this.webpackJsonpgithub_jobs_api=this.webpackJsonpgithub_jobs_api||[]).push([[0],{41:function(e,t,a){e.exports=a(74)},73:function(e,t,a){},74:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(12),l=a.n(r),o=a(14),s=a(8),i=a(36),m=a(22),u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_JOBS":return t.jobs;case"LOAD_MORE_JOBS":return[].concat(Object(m.a)(e),Object(m.a)(t.jobs));default:return e}},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ERRORS":return{error:t.error};case"RESET_ERRORS":return{};default:return e}},E=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||s.d,p=Object(s.e)(Object(s.c)({jobs:u,errors:d}),E(Object(s.a)(i.a)));console.log(p.getState());var b=p,f=a(7),h=a(6),v=a(19),j=a.n(v),O=a(20),_=a.n(O),g=a(37),N=a(38),y=a.n(N),S=a(11),R=a.n(S),w=function(e){return{type:"SET_JOBS",jobs:e}},x=function(e){return{type:"LOAD_MORE_JOBS",jobs:e}},C=function(){return c.a.createElement("header",{className:"header"},c.a.createElement("div",{className:"title"},"Github Job Search"))},k=a(10),I=a(77),T=a(76),D=a(40),J=a(78),L=c.a.createContext(void 0),M=function(){var e=Object(n.useContext)(L).onSearch,t=Object(n.useState)({description:"",location:"",full_time:!1}),a=Object(h.a)(t,2),r=a[0],l=a[1],o=function(e){var t=e.target,a=t.name,n=t.value;l("full_time"===a?function(e){return Object(f.a)(Object(f.a)({},r),{},Object(k.a)({},a,!e.full_time))}:Object(f.a)(Object(f.a)({},r),{},Object(k.a)({},a,n)))};return c.a.createElement("div",{className:"search-section"},c.a.createElement(I.a,{className:"search-form",onSubmit:function(t){t.preventDefault(),console.log(r),e(r)}},c.a.createElement(T.a,null,c.a.createElement(D.a,null,c.a.createElement(I.a.Group,{controlId:"description"},c.a.createElement(I.a.Control,{type:"text",name:"description",value:r.description||"",placeholder:"Enter search term",onChange:o}))),c.a.createElement(D.a,null,c.a.createElement(I.a.Group,{controlId:"location"},c.a.createElement(I.a.Control,{type:"text",name:"location",value:r.location||"",placeholder:"Enter location",onChange:o}))),c.a.createElement(D.a,null,c.a.createElement(J.a,{variant:"primary",type:"submit",className:"btn-search"},"Search"))),c.a.createElement("div",{className:"filters"},c.a.createElement(I.a.Group,{controlId:"full_time"},c.a.createElement(I.a.Check,{type:"checkbox",name:"full_time",className:"full-time-checkbox",label:"Full time only",checked:r.full_time,onChange:o})))))},B=function(e){var t=Object(n.useContext)(L).onItemClick,a=e.id,r=e.type,l=e.created_at,o=e.company,s=e.location,i=e.title,m=e.company_logo,u=e.index;return c.a.createElement("div",{className:"job-item",index:u+1,onClick:function(){return t(a)}},c.a.createElement("div",{className:"company-logo"},c.a.createElement("img",{src:m,alt:o,width:"100",height:"100"})),c.a.createElement("div",{className:"job-info"},c.a.createElement("div",{className:"job-title"},i),c.a.createElement("div",{className:"job-location"},s," | ",r),c.a.createElement("div",{className:"company-name"},o)),c.a.createElement("div",{className:"post-info"},c.a.createElement("div",{className:"post-time"},"Posted ",R()(new Date(l)).fromNow())))},P=function(){var e=Object(n.useContext)(L).results;return c.a.createElement("div",{className:"search-results"},e.map((function(e,t){return c.a.createElement(B,Object.assign({key:e.id},e,{index:t}))})))},G=function(){var e=Object(n.useContext)(L),t=e.details,a=e.onResetPage,r=t.type,l=t.title,o=t.description,s=t.location,i=t.company,m=t.company_url,u=t.company_logo,d=t.how_to_apply;return Object(n.useEffect)((function(){window.scrollTo(0,0)}),[]),c.a.createElement("div",{className:"job-details"},c.a.createElement("div",{className:"back-link"},c.a.createElement("a",{href:"/#",onClick:a},"<< Back to results")),c.a.createElement("div",null,r," / ",s),c.a.createElement("div",{className:"main-section"},c.a.createElement("div",{className:"left-section"},c.a.createElement("div",{className:"title"},l),c.a.createElement("hr",null),c.a.createElement("div",{className:"job-description",dangerouslySetInnerHTML:{__html:o}})),c.a.createElement("div",{className:"right-section"},c.a.createElement("div",{className:"company-details"},c.a.createElement("h3",null,"About company"),c.a.createElement("img",{src:u,alt:i,className:"company-logo"}),c.a.createElement("div",{className:"company-name"},i),c.a.createElement("a",{className:"company-url",href:m},m)),c.a.createElement("div",{className:"how-to-apply"},c.a.createElement("h3",null,"How to apply"),c.a.createElement("div",{dangerouslySetInnerHTML:{__html:d}})))))},A=Object(o.b)((function(e){return{jobs:e.jobs,errors:e.errors}}))((function(e){var t=Object(n.useState)([]),a=Object(h.a)(t,2),r=a[0],l=a[1],o=Object(n.useState)(null),s=Object(h.a)(o,2),i=s[0],m=s[1],u=Object(n.useState)(!1),d=Object(h.a)(u,2),E=d[0],p=d[1],b=Object(n.useState)(-1),v=Object(h.a)(b,2),O=v[0],N=v[1],S=Object(n.useState)("home"),k=Object(h.a)(S,2),I=k[0],T=k[1],D=Object(n.useState)(1),J=Object(h.a)(D,2),B=J[0],A=J[1],H=Object(n.useState)(null),U=Object(h.a)(H,2),X=U[0],F=(U[1],Object(n.useState)(!1)),V=Object(h.a)(F,2),q=(V[0],V[1]);Object(n.useEffect)((function(){l(e.jobs)}),[e.jobs]),Object(n.useEffect)((function(){m(e.errors)}),[e.errors]);var z=function(t){var a=e.dispatch,n=t.description,c=t.location,r=t.full_time,l=t.page,o=void 0===l?1:l,s=!1;t.hasOwnProperty("page")&&(s=!0),a({type:"RESET_ERRORS"}),p(!0),a(function(e,t){return function(){var a=Object(g.a)(_.a.mark((function a(n){var c,r,l,o,s,i;return _.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,c=e.description,r=e.full_time,l=e.location,o=e.page,c=c?encodeURIComponent(c):"",l=l?encodeURIComponent(l):"",r=r?"&full_time=true":"",o&&(o=parseInt(o),o=isNaN(o)?"":"&page=".concat(o)),a.next=8,y.a.get("".concat("http://localhost:5000","/jobs?description=").concat(c,"&location=").concat(l).concat(r).concat(o));case 8:if(s=a.sent,i=s.data.sort((function(e,t){return R()(new Date(t.created_at))-R()(new Date(e.created_at))})),!t){a.next=14;break}return a.abrupt("return",n(x(i)));case 14:return a.abrupt("return",n(w(i)));case 15:a.next=20;break;case 17:a.prev=17,a.t0=a.catch(0),a.t0.response&&n({type:"SET_ERRORS",error:a.t0.response.data});case 20:case"end":return a.stop()}}),a,null,[[0,17]])})));return function(e){return a.apply(this,arguments)}}()}({description:n,location:c,full_time:r,page:o},s)).then((function(e){e&&0===e.jobs.length?q(!0):q(!1),p(!1)})).catch((function(){return p(!1)}))},K={};"details"===I&&(K=r.find((function(e){return e.id===O})));var Q={results:r,details:K,onSearch:function(e){z(e)},onItemClick:function(e){T("details"),N(e)},onResetPage:function(){T("home")}};return c.a.createElement(L.Provider,{value:Q},c.a.createElement("div",{className:"".concat("details"===I&&"hide")},c.a.createElement(C,null)," ",c.a.createElement(M,null),!j.a.isEmpty(i)&&c.a.createElement("div",{className:"errorMsg"},c.a.createElement("p",null,i.error)),c.a.createElement(P,null),E&&c.a.createElement("p",{className:"loading"},"Loading..."),r.length>0&&j.a.isEmpty(i)&&c.a.createElement("div",{className:"load-more",onClick:E?null:function(){z(Object(f.a)(Object(f.a)({},X),{},{page:B+1})),A(B+1)}},c.a.createElement("button",{disabled:E,className:"".concat(E?"disabled":"")},"Load More Jobs"))),c.a.createElement("div",{className:"".concat("home"===I&&"hide")},"details"===I&&c.a.createElement(G,null)))})),H=(a(72),a(73),function(){return c.a.createElement("footer",{className:" fixed-bottom text-center"},c.a.createElement("div",{className:"container-fluid bg-light py-3"},c.a.createElement("span",{className:"text-muted te"}," \xa9 Copyright powered by DimovDev 2020")))});l.a.render(c.a.createElement(o.a,{store:b},c.a.createElement(A,null),",",c.a.createElement(H,null)),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.f1219cb6.chunk.js.map